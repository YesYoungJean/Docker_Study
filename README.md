# Docker, 이해를 위한 기록
![image](https://github.com/YesYoungJean/Docker_Study/assets/107979338/cd18623b-9cd1-49dc-bb7b-c9fe71eb6814)
<br/>
<br/>

## Docker는 무엇인가?
    Docker는 '어플리케이션을 개발(develop), 공유(ship), 구동(run)하기 위한 컨테이너 기반의 오픈소스 가상화 플랫폼'이다.
![image](https://github.com/YesYoungJean/Docker_Study/assets/107979338/e1f34e80-3de3-4ff6-a95d-895dfd676516)  
<br/>
<br/>

## Docker 등장 배경
### 전통적인 서버 관리 방식의 문제점
    일례로, 프로세스 중 하나를 변경하면 이후의 모든 프로세스를 한-땀-한-땀 수정해야 하는 상황이 발생할 수 있다.
![image](https://github.com/YesYoungJean/Docker_Study/assets/107979338/7e75c106-e43f-4512-84f0-2054c18f06fa)
<br/>
<br/>

### 문제점 해결 노력
##### 1) 문서를 통한 서버 배포
    - "문서로는 부족해.."
    
##### 2) 상태관리 도구
    - "한 서버에 다른 버전을 여러개 설치할 때는 어떡하지?"
    
##### 3) 가상머신
    - 장점_1: "1개 서버에 여러개 서버 설치 쉽다!"
    - 장점_2: "현재 상태를 저장하기도 좋다!"
    - 큰 단점: "처음부터 다시 세팅하려면 어떻게 하지? 왜 느리지?"
    
##### 4) 자원격리
    - 장점_1: "프로세스, 파일 및 디렉토리 등을 가상으로 분리할 수 있어 좋다!"
    - 큰 단점: "고오오급 기술이라 너무 어렵다!"

### Docker 등장
    1) 격리된 환경에서 작동하는 프로세스인 컨테이너 기반으로 동작한다.
    2) 리눅스 커널의 여러 기술 활용한다.
    3) 하드웨어 가상화 기술보다 가볍다.
    4) 이미지 단위로 프로세스 실행 환경을 구성한다.
<br/>
<br/>

## Docker VS VM
    - 윈도우에 VM을 설치 시 들어가는 Hypervisor와 Guest OS가 실행 속도를 느리게 한다.
    - 반면, Docker의 Docker Engine은 '격리'만 해주기에 성능상 하락이 없다.
![image](https://github.com/YesYoungJean/Docker_Study/assets/107979338/ab53a0c3-ce93-40ed-93a7-2016a512b2b3)
<br/>
<br/>

### Docker 5개 특징
##### 1) 확장성 & 이식성
    - 도커가 설치되어 있다면, 어디서든 컨테이너를 실행할 수 있다.
    - 특정 회사나 서비스에 종속적이지 않다.
    - 개발 서버 및 테스트 서버를 쉽게 생성할 수 있다.

##### 2) 표준성
    - 기존 ruby, nodejs, go, php 등으로 만든 서비스의 배포 방식은 제각각이다.
    - 하지만, '컨테이너'라는 표준으로 서버를 배포하므로 모든 서비스의 배포 과정이 동일하다.
    - 즉, capistrano? fabric? ftp? 이제는 필요없다.

##### 3) 이미지
    - 이미지는 '컨테이너를 실행하기 위한 압축파일'을 의미한다.
    - 이미지에서 컨테이너를 생성하기에 이미지를 빌드하는 과정이 반드시 필요하다.
    - 해당 이미지는 'Docker 파일' 이라는 스크립트로 만든다.
    - 빌드 서버에서 이미지를 만들어 '이미지 저장소'에 저장하고, 운영 서버에서 해당 이미지를 불러오게끔 구성된다.

##### 4) 설정 관리
    - 설정은 보통 환경변수로 제어하며, 컨테이너 띄울 때 환경변수를 같이 지정한다. (ex MYSQL_PASS=password)
    - 하나의 이미지가 환경변수에 따라 동적으로 설정파일을 생성하도록 만들어져야 한다.
    
##### 5) 자원관리
    - 컨테이너는 삭제 후 새로 생성하면 모든 데이터가 초기화된다.
    - 업로드 파일은 외부 스토리지와 링크하여 사용하거나, S3같은 별도의 저장소가 필요하다.
    - 세션이나 캐시를 memcached나 redis와 같은 외부로 분리한다.

### Docker가 가져온 변화
    - 클라우드 이미지보다 관리하기 쉽다.
    - 타 프로세스와 격리되어 가상머신처럼 사용되지만 성능 저하가 거의 없다.
    - 복잡한 기술을 몰라도 사용할 수 있다.
    - 이미지 빌드 이력이 남는다.
    - 코드와 설정으로 관리되어 재현 및 수정이 용이하다.
    - 오픈소스이기에 특정 회사의 기술에 종속적이지 않다.
    
### 즉, 모든 것은 컨테이너로 만들어 관리한다.
![image](https://github.com/YesYoungJean/Docker_Study/assets/107979338/abe5d8bf-ddcd-4a02-b06f-dffb2635eaa9)

<br/>
<br/>

## Docker의 미래
    - == '컨테이너의 미래'
    - 현재 'Kubernetes'가 서버 관리의 대세로 여러대의 서버와 서비스를 관리하기 쉽게 지원한다.
    - Kubernetes 내 다수의 Docker가 존재한다.
![image](https://github.com/YesYoungJean/Docker_Study/assets/107979338/442b9554-9434-4f65-8bf8-ff709f1b08f8)


    
### Kubernetes 특징
##### 1) 스케줄링
    - 컨테이너를 적당한 서버에 배포해 주는 작업을 말한다.
    - 여러 서버 중 가장 한가한 서버에 배포하거나, 차례대로 혹은 랜덤하게 배포한다.
    - 컨테이너 개수를 여러 개로 늘리면 적당히 나눠서 배포하고, 서버가 죽으면 실행 중이던 컨테이너를 다른 서버에 띄어준다.

##### 2) 클러스터링
    - 여러개의 서버를 하나의 서버처럼 사용한다.
    - 적게는 소수의 서버부터 많게는 수천대의 서버를 하나의 클러스터로 관리한다.
    - 여러곳에 흩어져 있는 컨테이너도 가상 네트워크를 이용하여 마치 같은 서버에 있는 것처럼 쉽게 통신한다.

##### 3) 서비스 디스커버리
    - 서비스를 찾아주는 기능을 말한다.
    - 클러스터 환경에서 컨테이너는 어느 서버에 생성될지 알 수 없고 다른 서버로 이동할 수 있다. 
    - 이에 컨테이너와 통신하고자 컨테이너가 생성 및 중지될 때 컨테이너의 Ip와 Port 번호를 업데이트 해준다.
    - Key-Value 스토리지에 정보를 저장할 수 있고, 내부 DNS 서버를 이용
    
